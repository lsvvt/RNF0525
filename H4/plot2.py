import sys
import plotly.graph_objects as go
import numpy as np

x = [2.00, 1.90, 1.80, 1.70, 1.60, 1.50, 1.40, 1.30, 1.20, 1.10, 1.00, 0.90]
y = [-2.025084428087608, -2.032345214635941, -2.040450278839692, -2.0487242024393235, -2.056829273084402, -2.06425890614596, -2.0696622908702307, -2.0708442744347546, -2.0667917391122157, -2.054971858377685, -2.0303189469746714, -1.9859099435879288, -2.0367354558675856, -2.043320837039035, -2.0497373330492947, -2.0566604072471946, -2.063245775535989, -2.0688180132148126, -2.072363976791039, -2.072195123836486, -2.066622886157663, -2.0531144436709683, -2.027110695748878, -1.9811819867851876, -2.031500936980523, -2.041801121800096, -2.0532833030668485, -2.0656097555476918, -2.077936214469862, -2.08975610164572, -2.099380861764428, -2.105459658306909, -2.1064727889168804, -2.0990431558553224, -2.0792870509889387, -2.0399437135347065, -2.049568480094742, -2.060037517868868, -2.0715196991356204, -2.083508439266031, -2.0958348981882016, -2.1074859324095065, -2.117110692528214, -2.1236960608170086, -2.12470919142698, -2.11778611722908, -2.0983677311544566, -2.058855534304344, -2.0629080696268836, -2.0738836791473227, -2.086041272232286, -2.0988742900181148, -2.111876173641151, -2.1240337667261144, -2.134502817382895, -2.141594744535348, -2.1434521528007378, -2.137373356258256, -2.118968100793604, -2.0809756062997757]

x = np.array(x)
y = np.array(y)

names = ["FCI / SUMR-CCSD", "CCSD", "PBE", "B3LYP", "O3P86"]
symbols = ["square-x", "square-open", "triangle-up-open", "circle-open", "circle"]

print(len(y) / len(x))
fig = go.Figure()
for i in range(int(len(y) / len(x))):
    fig.add_trace(go.Scatter(x=x, y=y[i * len(x):(i + 1) * len(x)], marker_line_color="black", marker_color="black", name=names[i], mode='markers+lines', marker_size=12, marker_symbol = symbols[i], ))

datain = [{'1': {'DM21': {'Ener': -2.014405016092987, 'Time': 168.29181432724}}, '2': {'DM21': {'Ener': -2.048043931004023, 'Time': 16.67746329307556}}, '3': {'DM21': {'Ener': -2.0625313353150325, 'Time': 15.414436340332031}}, '4': {'DM21': {'Ener': -2.0655298712102947, 'Time': 10.351732969284058}}, '5': {'DM21': {'Ener': -2.061232830051037, 'Time': 13.68491005897522}}, '6': {'DM21': {'Ener': -2.051651432364782, 'Time': 20.657750844955444}}, '7': {'DM21': {'Ener': -2.0380141400579976, 'Time': 15.279814004898071}}, '8': {'DM21': {'Ener': -2.0215289003162, 'Time': 15.243093490600586}}, '9': {'DM21': {'Ener': -2.0077192180839374, 'Time': 17.085250854492188}}, '10': {'DM21': {'Ener': -1.9918664802940877, 'Time': 17.127261877059937}}, '11': {'DM21': {'Ener': -0.6245548402904522, 'Time': 875.0719401836395}}}, {'1': {'B3LYP': {'Ener': -2.0452387743289795, 'Time': 5.282981634140015}}, '2': {'B3LYP': {'Ener': -2.0845062838298904, 'Time': 2.9248108863830566}}, '3': {'B3LYP': {'Ener': -2.1040348024082007, 'Time': 2.224764823913574}}, '4': {'B3LYP': {'Ener': -2.111056639697746, 'Time': 2.1382975578308105}}, '5': {'B3LYP': {'Ener': -2.109925013757871, 'Time': 2.575789213180542}}, '6': {'B3LYP': {'Ener': -2.103487159420199, 'Time': 2.589139699935913}}, '7': {'B3LYP': {'Ener': -2.0937553191451688, 'Time': 2.565864324569702}}, '8': {'B3LYP': {'Ener': -2.0822170285266073, 'Time': 2.6437511444091797}}, '9': {'B3LYP': {'Ener': -2.0699844814166397, 'Time': 2.710177183151245}}, '10': {'B3LYP': {'Ener': -2.057876751668374, 'Time': 2.7984371185302734}}, '11': {'B3LYP': {'Ener': -2.0464722764084726, 'Time': 2.6750662326812744}}}]
print(datain[0].keys())
data = dict.fromkeys(datain[0].keys(), {})
for i in datain:
    for k in i:
        data[k] = data[k] | i[k]

print(data)

### DM21
dm21y = []
for i in dm21:
    dm21y.append(data[i]["DM21"]["Ener"])

dm21y.append(np.nan)
dm21y = np.array(dm21y)[::-1]
dm21y[1] = np.nan
print(dm21y)

fig.add_trace(go.Scatter(x=x, y=dm21y, name="DM21", mode='markers+lines', marker_size=12, ))
###

### B3LYP
b3lypy = []
for i in b3lyp:
    b3lypy.append(data[i]["B3LYP"]["Ener"])

b3lypy.append(np.nan)
b3lypy = np.array(b3lypy)[::-1]
# b3lypy[1] = np.nan
print(b3lypy)

fig.add_trace(go.Scatter(x=x, y=b3lypy, name="B3LYP5", mode='markers+lines', marker_size=12, ))
###

fig.update_layout(template="simple_white", title="")
fig.update_layout(
    xaxis_title="d/Angstrom",
    yaxis_title="Energy/hatree",
    # autosize=False,
    # showlegend=False,
    width=1480,
    height=1050,
    font=dict(
        family="Colibri",
        size=26,
        # color="#7f7f7f"
        color="#000000"
    ),
)

fig.update_layout(legend=dict(
    yanchor="top",
    y=0.99,
    xanchor="right",
    x=0.99
))

fig.update_yaxes(
        title_standoff = 20,
        # dtick = 2,
        range = [-2.16, -1.98])

fig.update_xaxes(
        title_standoff = 20,
        # dtick = 2,
        range = [0.8, 2.4])

fig.show()